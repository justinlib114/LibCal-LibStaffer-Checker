<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Desk Conflict Checker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      color: #333;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    .user {
      margin-bottom: 20px;
    }
    .entry {
      padding: 5px 0;
    }

    /* Conflict and Weekend styles */
    .conflict, .weekend-off {
      color: red;
      font-weight: bold;
    }

    /* Type color codes */
    .type-shift {
      color: #1e90ff; /* Dodger Blue */
    }
    .type-timeoff {
      color: #ffa500; /* Orange */
    }
    .type-event {
      color: #228b22; /* Forest Green */
    }
    .type-appointment {
      color: #9932cc; /* Dark Orchid */
    }
  </style>
</head>
<body>
  <h1>Desk Conflict Checker</h1>
  <label for="search">Filter by Name:</label>
  <input type="text" id="search" onkeyup="filterList()" placeholder="Type a name...">

  <% Object.keys(conflicts).forEach(name => { %>
    <div class="user">
      <h2><%= name %></h2>
      <% if (conflicts[name].length === 0) { %>
        <p>No conflicts found.</p>
      <% } else { %>
        <% conflicts[name].forEach(item => {
          const type = item.type.toLowerCase();
          const isConflict = item.conflict;
          const isWeekendOff = item.type.includes("Day Off for Weekend");
          let typeClass = '';

          if (type.startsWith('shift')) typeClass = 'type-shift';
          else if (type.startsWith('time off')) typeClass = 'type-timeoff';
          else if (type.startsWith('event')) typeClass = 'type-event';
          else if (type.startsWith('appointment')) typeClass = 'type-appointment';
        %>
          <div class="entry <%= isConflict || isWeekendOff ? 'conflict' : typeClass %>">
            <%= item.from.format('MMM D, h:mm A') %> â€“ <%= item.to.format('h:mm A') %> : <%= item.type %>
          </div>
        <% }) %>
      <% } %>
    </div>
  <% }) %>

  <script>
    function filterList() {
      const input = document.getElementById("search").value.toLowerCase();
      const users = document.querySelectorAll(".user");
      users.forEach(user => {
        const name = user.querySelector("h2").innerText.toLowerCase();
        user.style.display = name.includes(input) ? "" : "none";
      });
    }
  </script>
</body>
</html>
