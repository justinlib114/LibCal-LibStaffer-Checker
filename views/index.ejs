<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Desk Conflict Checker</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background: #f9f9f9;
    }
    h2 {
      margin-top: 40px;
    }
    .user-section {
      margin-bottom: 40px;
    }
    .conflict {
      color: red;
    }
    .availability {
      color: green;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      margin-bottom: 4px;
    }
  </style>
</head>
<body>
  <h1>Desk Conflict Checker</h1>

  <% Object.keys(conflicts).forEach(name => { %>
    <div class="user-section">
      <h2><%= name %></h2>

      <h3>Conflicts:</h3>
      <ul>
        <% if (conflicts[name].length === 0) { %>
          <li>✅ No conflicts</li>
        <% } else { %>
          <% conflicts[name].forEach(c => { %>
            <li class="<%= c.conflict ? 'conflict' : '' %>">
              <%= c.from.format("ddd MM/DD h:mm A") %> - <%= c.to.format("h:mm A") %>: <%= c.type %>
              <% if (c.conflict) { %> ❌ Conflict <% } %>
            </li>
          <% }) %>
        <% } %>
      </ul>

      <h3>Available Desk Shifts:</h3>
      <ul>
        <% if (availability[name].length === 0) { %>
          <li>❌ No desk shift availability</li>
        <% } else { %>
          <% availability[name].forEach(slot => { %>
            <li class="availability"><%= slot.date %> — <%= slot.from %> to <%= slot.to %></li>
          <% }) %>
        <% } %>
      </ul>
    </div>
  <% }) %>
</body>
</html>
